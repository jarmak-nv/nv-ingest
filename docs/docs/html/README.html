<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>NVIDIA-Ingest: Multi-modal data extraction &#8212; NV-Ingest  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!--
SPDX-FileCopyrightText: Copyright (c) 2024, NVIDIA CORPORATION & AFFILIATES.
All rights reserved.
SPDX-License-Identifier: Apache-2.0
-->
<section id="nvidia-ingest-multi-modal-data-extraction">
<h1>NVIDIA-Ingest: Multi-modal data extraction<a class="headerlink" href="#nvidia-ingest-multi-modal-data-extraction" title="Link to this heading">¬∂</a></h1>
<p>NVIDIA-Ingest is a scalable, performance-oriented document content and metadata extraction microservice. Including support for parsing PDFs, Word and PowerPoint documents, it uses specialized NVIDIA NIM microservices to find, contextualize, and extract text, tables, charts and images for use in downstream generative applications.</p>
<p>NVIDIA Ingest enables parallelization of the process of splitting documents into pages where contents are classified (as tables, charts, images, text), extracted into discrete content, and further contextualized via optical character recognition (OCR) into a well defined JSON schema. From there, NVIDIA Ingest can optionally manage computation of embeddings for the extracted content, and also optionally manage storing into a vector database <a class="reference external" href="https://milvus.io/">Milvus</a>.</p>
<section id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Link to this heading">¬∂</a></h2>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#introduction"><span class="xref myst">Introduction</span></a></p></li>
<li><p><a class="reference internal" href="#prerequisites"><span class="xref myst">Prerequisites</span></a></p></li>
<li><p><a class="reference internal" href="#quickstart"><span class="xref myst">Quickstart</span></a></p></li>
<li><p><a class="reference internal" href="#repo-structure"><span class="xref myst">Repo Structure</span></a></p></li>
<li><p><a class="reference internal" href="#notices"><span class="xref myst">Notices</span></a></p></li>
</ol>
</section>
</section>
<section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¬∂</a></h1>
<section id="what-nvidia-ingest-is">
<h2>What NVIDIA-Ingest is ‚úîÔ∏è<a class="headerlink" href="#what-nvidia-ingest-is" title="Link to this heading">¬∂</a></h2>
<p>A microservice that:</p>
<ul class="simple">
<li><p>Accepts a JSON Job description, containing a document payload, and a set of ingestion tasks to perform on that payload.</p></li>
<li><p>Allows the results of a Job to be retrieved; the result is a JSON dictionary containing a list of Metadata describing objects extracted from the base document, as well as processing annotations and timing/trace data.</p></li>
<li><p>Supports PDF, Docx, pptx, and images.</p></li>
<li><p>Supports multiple methods of extraction for each document type in order to balance trade-offs between throughput and accuracy. For example, for PDF documents we support extraction via pdfium, Unstructured.io, and Adobe Content Extraction Services.</p></li>
<li><p>Supports various types of pre and post processing operations, including text splitting and chunking; transform, and filtering; embedding generation, and image offloading to storage.</p></li>
</ul>
</section>
<section id="what-nvidia-ingest-is-not">
<h2>What NVIDIA-Ingest is not ‚úñÔ∏è<a class="headerlink" href="#what-nvidia-ingest-is-not" title="Link to this heading">¬∂</a></h2>
<p>A service that:</p>
<ul class="simple">
<li><p>Runs a static pipeline or fixed set of operations on every submitted document.</p></li>
<li><p>Acts as a wrapper for any specific document parsing library.</p></li>
</ul>
</section>
</section>
<section id="prerequisites">
<h1>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">¬∂</a></h1>
<section id="hardware">
<h2>Hardware<a class="headerlink" href="#hardware" title="Link to this heading">¬∂</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>GPU</p></th>
<th class="head"><p>Family</p></th>
<th class="head"><p>Memory</p></th>
<th class="head"><p># of GPUs (min.)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>H100</p></td>
<td><p>SXM/NVLink or PCIe</p></td>
<td><p>80GB</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>A100</p></td>
<td><p>SXM/NVLink or PCIe</p></td>
<td><p>80GB</p></td>
<td><p>2</p></td>
</tr>
</tbody>
</table>
</section>
<section id="software">
<h2>Software<a class="headerlink" href="#software" title="Link to this heading">¬∂</a></h2>
<ul class="simple">
<li><p>Linux operating systems (Ubuntu 22.04 or later recommended)</p></li>
<li><p><a class="reference external" href="https://docs.docker.com/engine/install/">Docker</a></p></li>
<li><p><a class="reference external" href="https://docs.docker.com/compose/install/">Docker Compose</a></p></li>
<li><p><a class="reference external" href="https://developer.nvidia.com/cuda-downloads">CUDA Toolkit</a> (NVIDIA Driver &gt;= <code class="docutils literal notranslate"><span class="pre">535</span></code>, CUDA &gt;= <code class="docutils literal notranslate"><span class="pre">12.2</span></code>)</p></li>
<li><p><a class="reference external" href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html">NVIDIA Container Toolkit</a></p></li>
</ul>
</section>
</section>
<section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Link to this heading">¬∂</a></h1>
<p>To get started using NVIDIA Ingest, you need to do a few things:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#step-1-starting-containers"><span class="xref myst">Start supporting NIM microservices</span></a> üèóÔ∏è</p></li>
<li><p><a class="reference internal" href="#step-2-installing-python-dependencies"><span class="xref myst">Install the NVIDIA Ingest client dependencies in a Python environment</span></a> üêç</p></li>
<li><p><a class="reference internal" href="#step-3-ingesting-documents"><span class="xref myst">Submit ingestion job(s)</span></a> üìì</p></li>
<li><p><a class="reference internal" href="#step-4-inspecting-and-consuming-results"><span class="xref myst">Inspect and consume results</span></a> üîç</p></li>
</ol>
<section id="step-1-starting-containers">
<h2>Step 1: Starting containers<a class="headerlink" href="#step-1-starting-containers" title="Link to this heading">¬∂</a></h2>
<p>This example demonstrates how to use the provided <a class="reference internal" href="#docker-compose.yaml"><span class="xref myst">docker-compose.yaml</span></a> to start all needed services with a few commands.</p>
<blockquote>
<div><p>[!IMPORTANT]
NIM containers on their first startup can take 10-15 minutes to pull and fully load models.</p>
</div></blockquote>
<p>If preferred, you can also <a class="reference internal" href="#docs/deployment.md"><span class="xref myst">start services one by one</span></a>, or run on Kubernetes via <a class="reference internal" href="#helm/README.md"><span class="xref myst">our Helm chart</span></a>. Also of note are <a class="reference internal" href="#docs/environment-config.md"><span class="xref myst">additional environment variables</span></a> you may wish to configure.</p>
<ol class="arabic simple">
<li><p>Git clone the repo:
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/nvidia/nv-ingest</span></code></p></li>
<li><p>Change directory to the cloned repo
<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">nv-ingest</span></code>.</p></li>
<li><p><a class="reference internal" href="#docs/ngc-api-key.md"><span class="xref myst">Generate API keys</span></a> and authenticate with NGC with the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">login</span></code> command:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is required to access pre-built containers and NIM microservices</span>
$<span class="w"> </span>docker<span class="w"> </span>login<span class="w"> </span>nvcr.io
Username:<span class="w"> </span><span class="nv">$oauthtoken</span>
Password:<span class="w"> </span>&lt;Your<span class="w"> </span>Key&gt;
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Create a .env file containing your NGC API key, and the following paths:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Container images must access resources from NGC. </span>
<span class="n">NGC_API_KEY</span><span class="o">=...</span>
<span class="n">DATASET_ROOT</span><span class="o">=&lt;</span><span class="n">PATH_TO_THIS_REPO</span><span class="o">&gt;/</span><span class="n">data</span>
<span class="n">NV_INGEST_ROOT</span><span class="o">=&lt;</span><span class="n">PATH_TO_THIS_REPO</span><span class="o">&gt;</span>
</pre></div>
</div>
<blockquote>
<div><p>[!NOTE]
As configured by default in <a class="reference internal" href="#docker-compose.yaml#L52"><span class="xref myst">docker-compose.yaml</span></a>, the DePlot NIM is on a dedicated GPU. All other NIMs and the nv-ingest container itself share a second. This is to avoid DePlot and other NIMs competing for VRAM on the same device.</p>
<p>Change the <code class="docutils literal notranslate"><span class="pre">CUDA_VISIBLE_DEVICES</span></code> pinnings as desired for your system within docker-compose.yaml.</p>
</div></blockquote>
<blockquote>
<div><p>[!IMPORTANT]
Make sure NVIDIA is set as your default container runtime before running the docker compose command with the command:
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nvidia-ctk</span> <span class="pre">runtime</span> <span class="pre">configure</span> <span class="pre">--runtime=docker</span> <span class="pre">--set-as-default</span></code></p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Start all services:
<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span> <span class="pre">up</span></code></p></li>
</ol>
<blockquote>
<div><p>[!TIP]
By default we have <a class="reference internal" href="#docker-compose.yaml#L27"><span class="xref myst">configured log levels to be verbose</span></a>.</p>
<p>It‚Äôs possible to observe service startup proceeding: you will notice <em>many</em> log messages. Disable verbose logging by configuring <code class="docutils literal notranslate"><span class="pre">NIM_TRITON_LOG_VERBOSE=0</span></code> for each NIM in <a class="reference internal" href="#docker-compose.yaml"><span class="xref myst">docker-compose.yaml</span></a>.</p>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>When all services have fully started, <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code> should show processes like the following:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># If it&#39;s taking &gt; 1m for `nvidia-smi` to return, it&#39;s likely the bus is still busy setting up the models.</span>
<span class="o">+---------------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">Processes</span><span class="p">:</span>                                                                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">GPU</span>   <span class="n">GI</span>   <span class="n">CI</span>        <span class="n">PID</span>   <span class="n">Type</span>   <span class="n">Process</span> <span class="n">name</span>                            <span class="n">GPU</span> <span class="n">Memory</span> <span class="o">|</span>
<span class="o">|</span>        <span class="n">ID</span>   <span class="n">ID</span>                                                             <span class="n">Usage</span>      <span class="o">|</span>
<span class="o">|=======================================================================================|</span>
<span class="o">|</span>    <span class="mi">0</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="mi">1352957</span>      <span class="n">C</span>   <span class="n">tritonserver</span>                                <span class="mi">762</span><span class="n">MiB</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">1</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="mi">1322081</span>      <span class="n">C</span>   <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nim</span><span class="o">/</span><span class="n">llm</span><span class="o">/.</span><span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span>            <span class="mi">63916</span><span class="n">MiB</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">2</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="mi">1355175</span>      <span class="n">C</span>   <span class="n">tritonserver</span>                                <span class="mi">478</span><span class="n">MiB</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">2</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="mi">1367569</span>      <span class="n">C</span>   <span class="o">...</span><span class="n">s</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">triton_python_backend_stub</span>       <span class="mi">12</span><span class="n">MiB</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="mi">1321841</span>      <span class="n">C</span>   <span class="n">python</span>                                      <span class="mi">414</span><span class="n">MiB</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="mi">1352331</span>      <span class="n">C</span>   <span class="n">tritonserver</span>                                <span class="mi">478</span><span class="n">MiB</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="mi">1355929</span>      <span class="n">C</span>   <span class="o">...</span><span class="n">s</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">triton_python_backend_stub</span>      <span class="mi">424</span><span class="n">MiB</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="mi">1373202</span>      <span class="n">C</span>   <span class="n">tritonserver</span>                                <span class="mi">414</span><span class="n">MiB</span> <span class="o">|</span>
<span class="o">+---------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Observe the started containers with <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONTAINER</span> <span class="n">ID</span>   <span class="n">IMAGE</span>                                                                      <span class="n">COMMAND</span>                  <span class="n">CREATED</span>          <span class="n">STATUS</span>                    <span class="n">PORTS</span>                                                                                                                                                                                                                                                                                <span class="n">NAMES</span>
<span class="mi">0</span><span class="n">f2f86615ea5</span>   <span class="n">nvcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">ohlfw0olaadg</span><span class="o">/</span><span class="n">ea</span><span class="o">-</span><span class="n">participants</span><span class="o">/</span><span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="p">:</span><span class="mf">24.08</span>                       <span class="s2">&quot;/opt/conda/bin/tini‚Ä¶&quot;</span>   <span class="mi">35</span> <span class="n">seconds</span> <span class="n">ago</span>   <span class="n">Up</span> <span class="mi">33</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">7670</span><span class="o">-&gt;</span><span class="mi">7670</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">7670</span><span class="o">-&gt;</span><span class="mi">7670</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                                                                                                            <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">ms</span><span class="o">-</span><span class="n">runtime</span><span class="o">-</span><span class="mi">1</span>
<span class="n">de44122c6ddc</span>   <span class="n">otel</span><span class="o">/</span><span class="n">opentelemetry</span><span class="o">-</span><span class="n">collector</span><span class="o">-</span><span class="n">contrib</span><span class="p">:</span><span class="mf">0.91.0</span>                                <span class="s2">&quot;/otelcol-contrib --‚Ä¶&quot;</span>   <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">24</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">4317</span><span class="o">-</span><span class="mi">4318</span><span class="o">-&gt;</span><span class="mi">4317</span><span class="o">-</span><span class="mi">4318</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">4317</span><span class="o">-</span><span class="mi">4318</span><span class="o">-&gt;</span><span class="mi">4317</span><span class="o">-</span><span class="mi">4318</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8888</span><span class="o">-</span><span class="mi">8889</span><span class="o">-&gt;</span><span class="mi">8888</span><span class="o">-</span><span class="mi">8889</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8888</span><span class="o">-</span><span class="mi">8889</span><span class="o">-&gt;</span><span class="mi">8888</span><span class="o">-</span><span class="mi">8889</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">13133</span><span class="o">-&gt;</span><span class="mi">13133</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">13133</span><span class="o">-&gt;</span><span class="mi">13133</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mi">55678</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">32849</span><span class="o">-&gt;</span><span class="mi">9411</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">32848</span><span class="o">-&gt;</span><span class="mi">9411</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">55680</span><span class="o">-&gt;</span><span class="mi">55679</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">55680</span><span class="o">-&gt;</span><span class="mi">55679</span><span class="o">/</span><span class="n">tcp</span>   <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">otel</span><span class="o">-</span><span class="n">collector</span><span class="o">-</span><span class="mi">1</span>
<span class="mi">02</span><span class="n">c9ab8c6901</span>   <span class="n">nvcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">ohlfw0olaadg</span><span class="o">/</span><span class="n">ea</span><span class="o">-</span><span class="n">participants</span><span class="o">/</span><span class="n">cached</span><span class="p">:</span><span class="mf">0.1.0</span>                          <span class="s2">&quot;/opt/nvidia/nvidia_‚Ä¶&quot;</span>   <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">24</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8006</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8006</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8007</span><span class="o">-&gt;</span><span class="mi">8001</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8007</span><span class="o">-&gt;</span><span class="mi">8001</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8008</span><span class="o">-&gt;</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8008</span><span class="o">-&gt;</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                      <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">cached</span><span class="o">-</span><span class="mi">1</span>
<span class="n">d49369334398</span>   <span class="n">nvcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">nim</span><span class="o">/</span><span class="n">nvidia</span><span class="o">/</span><span class="n">nv</span><span class="o">-</span><span class="n">embedqa</span><span class="o">-</span><span class="n">e5</span><span class="o">-</span><span class="n">v5</span><span class="p">:</span><span class="mf">1.0.1</span>                                  <span class="s2">&quot;/opt/nvidia/nvidia_‚Ä¶&quot;</span>   <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">33</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8012</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8012</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8013</span><span class="o">-&gt;</span><span class="mi">8001</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8013</span><span class="o">-&gt;</span><span class="mi">8001</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8014</span><span class="o">-&gt;</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8014</span><span class="o">-&gt;</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                      <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">embedding</span><span class="o">-</span><span class="mi">1</span>
<span class="mi">508715</span><span class="n">a24998</span>   <span class="n">nvcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">ohlfw0olaadg</span><span class="o">/</span><span class="n">ea</span><span class="o">-</span><span class="n">participants</span><span class="o">/</span><span class="n">nv</span><span class="o">-</span><span class="n">yolox</span><span class="o">-</span><span class="n">structured</span><span class="o">-</span><span class="n">images</span><span class="o">-</span><span class="n">v1</span><span class="p">:</span><span class="mf">0.1.0</span>   <span class="s2">&quot;/opt/nvidia/nvidia_‚Ä¶&quot;</span>   <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">33</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8000</span><span class="o">-</span><span class="mi">8002</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">-</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8000</span><span class="o">-</span><span class="mi">8002</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">-</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                                                                                        <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">yolox</span><span class="o">-</span><span class="mi">1</span>
<span class="mi">5</span><span class="n">b7a174a0a85</span>   <span class="n">nvcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">ohlfw0olaadg</span><span class="o">/</span><span class="n">ea</span><span class="o">-</span><span class="n">participants</span><span class="o">/</span><span class="n">deplot</span><span class="p">:</span><span class="mf">1.0.0</span>                          <span class="s2">&quot;/opt/nvidia/nvidia_‚Ä¶&quot;</span>   <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">33</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8003</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8003</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8004</span><span class="o">-&gt;</span><span class="mi">8001</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8004</span><span class="o">-&gt;</span><span class="mi">8001</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8005</span><span class="o">-&gt;</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8005</span><span class="o">-&gt;</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                      <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">deplot</span><span class="o">-</span><span class="mi">1</span>
<span class="mi">430045</span><span class="n">f98c02</span>   <span class="n">nvcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">ohlfw0olaadg</span><span class="o">/</span><span class="n">ea</span><span class="o">-</span><span class="n">participants</span><span class="o">/</span><span class="n">paddleocr</span><span class="p">:</span><span class="mf">0.1.0</span>                       <span class="s2">&quot;/opt/nvidia/nvidia_‚Ä¶&quot;</span>   <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">24</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8009</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8009</span><span class="o">-&gt;</span><span class="mi">8000</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8010</span><span class="o">-&gt;</span><span class="mi">8001</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8010</span><span class="o">-&gt;</span><span class="mi">8001</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8011</span><span class="o">-&gt;</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">8011</span><span class="o">-&gt;</span><span class="mi">8002</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                      <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">paddle</span><span class="o">-</span><span class="mi">1</span>
<span class="mf">8e587</span><span class="n">b45821b</span>   <span class="n">grafana</span><span class="o">/</span><span class="n">grafana</span>                                                            <span class="s2">&quot;/run.sh&quot;</span>                <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">33</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">3000</span><span class="o">-&gt;</span><span class="mi">3000</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">3000</span><span class="o">-&gt;</span><span class="mi">3000</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                                                                                                            <span class="n">grafana</span><span class="o">-</span><span class="n">service</span>
<span class="n">aa2c0ec387e2</span>   <span class="n">redis</span><span class="o">/</span><span class="n">redis</span><span class="o">-</span><span class="n">stack</span>                                                          <span class="s2">&quot;/entrypoint.sh&quot;</span>         <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">33</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">6379</span><span class="o">-&gt;</span><span class="mi">6379</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">6379</span><span class="o">-&gt;</span><span class="mi">6379</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mi">8001</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                                                                                                  <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">redis</span><span class="o">-</span><span class="mi">1</span>
<span class="n">bda9a2a9c8b5</span>   <span class="n">openzipkin</span><span class="o">/</span><span class="n">zipkin</span>                                                          <span class="s2">&quot;start-zipkin&quot;</span>           <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">33</span> <span class="n">seconds</span> <span class="p">(</span><span class="n">healthy</span><span class="p">)</span>   <span class="mi">9410</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">9411</span><span class="o">-&gt;</span><span class="mi">9411</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">9411</span><span class="o">-&gt;</span><span class="mi">9411</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                                                                                                  <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">zipkin</span><span class="o">-</span><span class="mi">1</span>
<span class="n">ac27e5297d57</span>   <span class="n">prom</span><span class="o">/</span><span class="n">prometheus</span><span class="p">:</span><span class="n">latest</span>                                                     <span class="s2">&quot;/bin/prometheus --w‚Ä¶&quot;</span>   <span class="mi">14</span> <span class="n">hours</span> <span class="n">ago</span>     <span class="n">Up</span> <span class="mi">33</span> <span class="n">seconds</span>             <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">9090</span><span class="o">-&gt;</span><span class="mi">9090</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span> <span class="p">:::</span><span class="mi">9090</span><span class="o">-&gt;</span><span class="mi">9090</span><span class="o">/</span><span class="n">tcp</span>                                                                                                                                                                                                                                            <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">prometheus</span><span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<blockquote>
<div><p>[!TIP]
nv-ingest is in Early Access mode, meaning the codebase gets frequent updates. To build an updated nv-ingest service container with the latest changes you can:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">compose</span> <span class="n">build</span>
</pre></div>
</div>
<p>After the image is built, run <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span> <span class="pre">up</span></code> per item 5 above.</p>
</div></blockquote>
</section>
<section id="step-2-installing-python-dependencies">
<h2>Step 2: Installing Python dependencies<a class="headerlink" href="#step-2-installing-python-dependencies" title="Link to this heading">¬∂</a></h2>
<p>To interact with the nv-ingest service, you can do so from the host, or by <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">exec</span></code>-ing into the nv-ingest container.</p>
<p>To interact from the host, you‚Äôll need a Python environment and install the client dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># conda not required, but makes it easy to create a fresh python environment</span>
<span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">dev</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.10</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">dev</span>
<span class="n">cd</span> <span class="n">client</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="o">./</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">.</span>
</pre></div>
</div>
<blockquote>
<div><p>[!NOTE]
Interacting from the host depends on the appropriate port being exposed from the nv-ingest container to the host as defined in <a class="reference internal" href="#docker-compose.yaml#L141"><span class="xref myst">docker-compose.yaml</span></a>.</p>
<p>If you prefer, you can disable exposing that port, and interact with the nv-ingest service directly from within its container.</p>
<p>To interact within the container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">exec</span> <span class="o">-</span><span class="n">it</span> <span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">nv</span><span class="o">-</span><span class="n">ingest</span><span class="o">-</span><span class="n">ms</span><span class="o">-</span><span class="n">runtime</span><span class="o">-</span><span class="mi">1</span> <span class="n">bash</span>
</pre></div>
</div>
<p>You‚Äôll be in the <code class="docutils literal notranslate"><span class="pre">/workspace</span></code> directory, which has <code class="docutils literal notranslate"><span class="pre">DATASET_ROOT</span></code> from the .env file mounted at <code class="docutils literal notranslate"><span class="pre">./data</span></code>. The pre-activated <code class="docutils literal notranslate"><span class="pre">morpheus</span></code> conda environment has all the python client libraries pre-installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">morpheus</span><span class="p">)</span> <span class="n">root</span><span class="nd">@aba77e2a4bde</span><span class="p">:</span><span class="o">/</span><span class="n">workspace</span><span class="c1">#</span>
</pre></div>
</div>
<p>From the bash prompt above, you can run nv-ingest-cli and Python examples described below.</p>
</div></blockquote>
</section>
<section id="step-3-ingesting-documents">
<h2>Step 3: Ingesting Documents<a class="headerlink" href="#step-3-ingesting-documents" title="Link to this heading">¬∂</a></h2>
<p>You can submit jobs programmatically in Python or via the nv-ingest-cli tool.</p>
<p>In the below examples, we are doing text, chart, table, and image extraction:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">extract_text</span></code>, - uses <a class="reference external" href="https://github.com/pypdfium2-team/pypdfium2/">PDFium</a> to find and extract text from pages</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extract_images</span></code> - uses <a class="reference external" href="https://github.com/pypdfium2-team/pypdfium2/">PDFium</a> to extract images</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extract_tables</span></code> - uses <a class="reference external" href="https://github.com/Megvii-BaseDetection/YOLOX">YOLOX</a> to find tables and charts. Uses <a class="reference external" href="https://github.com/PaddlePaddle/PaddleOCR">PaddleOCR</a> for table extraction, and <a class="reference external" href="https://huggingface.co/google/deplot">Deplot</a> and CACHED for chart extraction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extract_charts</span></code> - (optional) enables or disables the use of Deplot and CACHED for chart extraction.</p></li>
</ul>
<blockquote>
<div><p>[!IMPORTANT]
<code class="docutils literal notranslate"><span class="pre">extract_tables</span></code> controls extraction for both tables and charts. You can optionally disable chart extraction by setting <code class="docutils literal notranslate"><span class="pre">extract_charts</span></code> to false.</p>
</div></blockquote>
<section id="in-python-you-can-find-more-documentation-and-examples-here">
<h3>In Python (you can find more documentation and examples <a class="reference internal" href="#./client/client_examples/examples/python_client_usage.ipynb"><span class="xref myst">here</span></a>):<a class="headerlink" href="#in-python-you-can-find-more-documentation-and-examples-here" title="Link to this heading">¬∂</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span><span class="o">,</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">nv_ingest_client.client</span> <span class="kn">import</span> <span class="n">NvIngestClient</span>
<span class="kn">from</span> <span class="nn">nv_ingest_client.primitives</span> <span class="kn">import</span> <span class="n">JobSpec</span>
<span class="kn">from</span> <span class="nn">nv_ingest_client.primitives.tasks</span> <span class="kn">import</span> <span class="n">ExtractTask</span>
<span class="kn">from</span> <span class="nn">nv_ingest_client.primitives.tasks</span> <span class="kn">import</span> <span class="n">SplitTask</span>
<span class="kn">from</span> <span class="nn">nv_ingest_client.util.file_processing.extract</span> <span class="kn">import</span> <span class="n">extract_file_content</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;nv_ingest_client&quot;</span><span class="p">)</span>

<span class="n">file_name</span> <span class="o">=</span> <span class="s2">&quot;data/multimodal_test.pdf&quot;</span>
<span class="n">file_content</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="n">extract_file_content</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>

<span class="c1"># A JobSpec is an object that defines a document and how it should</span>
<span class="c1"># be processed by the nv-ingest service.</span>
<span class="n">job_spec</span> <span class="o">=</span> <span class="n">JobSpec</span><span class="p">(</span>
  <span class="n">document_type</span><span class="o">=</span><span class="n">file_type</span><span class="p">,</span>
  <span class="n">payload</span><span class="o">=</span><span class="n">file_content</span><span class="p">,</span>
  <span class="n">source_id</span><span class="o">=</span><span class="n">file_name</span><span class="p">,</span>
  <span class="n">source_name</span><span class="o">=</span><span class="n">file_name</span><span class="p">,</span>
  <span class="n">extended_options</span><span class="o">=</span>
    <span class="p">{</span>
      <span class="s2">&quot;tracing_options&quot;</span><span class="p">:</span>
      <span class="p">{</span>
        <span class="s2">&quot;trace&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;ts_send&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># configure desired extraction modes here. Multiple extraction</span>
<span class="c1"># methods can be defined for a single JobSpec</span>
<span class="n">extract_task</span> <span class="o">=</span> <span class="n">ExtractTask</span><span class="p">(</span>
  <span class="n">document_type</span><span class="o">=</span><span class="n">file_type</span><span class="p">,</span>
  <span class="n">extract_text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
  <span class="n">extract_images</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
  <span class="n">extract_tables</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="n">job_spec</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span><span class="n">extract_task</span><span class="p">)</span>

<span class="c1"># Create the client and inform it about the JobSpec we want to process.</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">NvIngestClient</span><span class="p">(</span>
  <span class="n">message_client_hostname</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="c1"># Host where nv-ingest-ms-runtime is running</span>
  <span class="n">message_client_port</span><span class="o">=</span><span class="mi">7670</span> <span class="c1"># REST port, defaults to 7670</span>
<span class="p">)</span>
<span class="n">job_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">add_job</span><span class="p">(</span><span class="n">job_spec</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">submit_job</span><span class="p">(</span><span class="n">job_id</span><span class="p">,</span> <span class="s2">&quot;morpheus_task_queue&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">fetch_job_result</span><span class="p">(</span><span class="n">job_id</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> results&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="using-the-the-nv-ingest-cli-you-can-find-more-nv-ingest-cli-examples-here">
<h3>Using the the <code class="docutils literal notranslate"><span class="pre">nv-ingest-cli</span></code> (you can find more nv-ingest-cli examples <a class="reference internal" href="#./client/client_examples/examples/cli_client_usage.ipynb"><span class="xref myst">here</span></a>):<a class="headerlink" href="#using-the-the-nv-ingest-cli-you-can-find-more-nv-ingest-cli-examples-here" title="Link to this heading">¬∂</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>nv-ingest-cli<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--doc<span class="w"> </span>./data/multimodal_test.pdf<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output_directory<span class="w"> </span>./processed_docs<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--task<span class="o">=</span><span class="s1">&#39;extract:{&quot;document_type&quot;: &quot;pdf&quot;, &quot;extract_method&quot;: &quot;pdfium&quot;, &quot;extract_tables&quot;: &quot;true&quot;, &quot;extract_images&quot;: &quot;true&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--client_host<span class="o">=</span>localhost<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--client_port<span class="o">=</span><span class="m">7670</span>
</pre></div>
</div>
<p>You should notice output indicating document processing status, followed by a breakdown of time spent during job execution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>INFO:nv_ingest_client.nv_ingest_cli:Processing 1 documents.
INFO:nv_ingest_client.nv_ingest_cli:Output will be written to: ./processed_docs
Processing files: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:10&lt;00:00, 10.47s/file, pages_per_sec=0.29]
INFO:nv_ingest_client.cli.util.processing:dedup_images: Avg: 1.02 ms, Median: 1.02 ms, Total Time: 1.02 ms, Total % of Trace Computation: 0.01%
INFO:nv_ingest_client.cli.util.processing:dedup_images_channel_in: Avg: 1.44 ms, Median: 1.44 ms, Total Time: 1.44 ms, Total % of Trace Computation: 0.01%
INFO:nv_ingest_client.cli.util.processing:docx_content_extractor: Avg: 0.66 ms, Median: 0.66 ms, Total Time: 0.66 ms, Total % of Trace Computation: 0.01%
INFO:nv_ingest_client.cli.util.processing:docx_content_extractor_channel_in: Avg: 1.09 ms, Median: 1.09 ms, Total Time: 1.09 ms, Total % of Trace Computation: 0.01%
INFO:nv_ingest_client.cli.util.processing:filter_images: Avg: 0.84 ms, Median: 0.84 ms, Total Time: 0.84 ms, Total % of Trace Computation: 0.01%
INFO:nv_ingest_client.cli.util.processing:filter_images_channel_in: Avg: 7.75 ms, Median: 7.75 ms, Total Time: 7.75 ms, Total % of Trace Computation: 0.07%
INFO:nv_ingest_client.cli.util.processing:job_counter: Avg: 2.13 ms, Median: 2.13 ms, Total Time: 2.13 ms, Total % of Trace Computation: 0.02%
INFO:nv_ingest_client.cli.util.processing:job_counter_channel_in: Avg: 2.05 ms, Median: 2.05 ms, Total Time: 2.05 ms, Total % of Trace Computation: 0.02%
INFO:nv_ingest_client.cli.util.processing:metadata_injection: Avg: 14.48 ms, Median: 14.48 ms, Total Time: 14.48 ms, Total % of Trace Computation: 0.14%
INFO:nv_ingest_client.cli.util.processing:metadata_injection_channel_in: Avg: 0.22 ms, Median: 0.22 ms, Total Time: 0.22 ms, Total % of Trace Computation: 0.00%
INFO:nv_ingest_client.cli.util.processing:pdf_content_extractor: Avg: 10332.97 ms, Median: 10332.97 ms, Total Time: 10332.97 ms, Total % of Trace Computation: 99.45%
INFO:nv_ingest_client.cli.util.processing:pdf_content_extractor_channel_in: Avg: 0.44 ms, Median: 0.44 ms, Total Time: 0.44 ms, Total % of Trace Computation: 0.00%
INFO:nv_ingest_client.cli.util.processing:pptx_content_extractor: Avg: 1.19 ms, Median: 1.19 ms, Total Time: 1.19 ms, Total % of Trace Computation: 0.01%
INFO:nv_ingest_client.cli.util.processing:pptx_content_extractor_channel_in: Avg: 0.98 ms, Median: 0.98 ms, Total Time: 0.98 ms, Total % of Trace Computation: 0.01%
INFO:nv_ingest_client.cli.util.processing:redis_source_network_in: Avg: 12.27 ms, Median: 12.27 ms, Total Time: 12.27 ms, Total % of Trace Computation: 0.12%
INFO:nv_ingest_client.cli.util.processing:redis_task_sink_channel_in: Avg: 2.16 ms, Median: 2.16 ms, Total Time: 2.16 ms, Total % of Trace Computation: 0.02%
INFO:nv_ingest_client.cli.util.processing:redis_task_source: Avg: 8.00 ms, Median: 8.00 ms, Total Time: 8.00 ms, Total % of Trace Computation: 0.08%
INFO:nv_ingest_client.cli.util.processing:Unresolved time: 82.82 ms, Percent of Total Elapsed: 0.79%
INFO:nv_ingest_client.cli.util.processing:Processed 1 files in 10.47 seconds.
INFO:nv_ingest_client.cli.util.processing:Total pages processed: 3
INFO:nv_ingest_client.cli.util.processing:Throughput (Pages/sec): 0.29
INFO:nv_ingest_client.cli.util.processing:Throughput (Files/sec): 0.10
</pre></div>
</div>
</section>
</section>
<section id="step-4-inspecting-and-consuming-results">
<h2>Step 4: Inspecting and Consuming Results<a class="headerlink" href="#step-4-inspecting-and-consuming-results" title="Link to this heading">¬∂</a></h2>
<p>After the ingestion steps above have completed, you should be able to find <code class="docutils literal notranslate"><span class="pre">text</span></code> and <code class="docutils literal notranslate"><span class="pre">image</span></code> subfolders inside your processed docs folder. Each will contain JSON formatted extracted content and metadata.</p>
<section id="when-processing-has-completed-you-ll-have-separate-result-files-for-text-and-image-data">
<h3>When processing has completed, you‚Äôll have separate result files for text and image data:<a class="headerlink" href="#when-processing-has-completed-you-ll-have-separate-result-files-for-text-and-image-data" title="Link to this heading">¬∂</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-R<span class="w"> </span>processed_docs/
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>processed_docs/:
image<span class="w">  </span>structured<span class="w">  </span>text

processed_docs/image:
multimodal_test.pdf.metadata.json

processed_docs/structured:
multimodal_test.pdf.metadata.json

processed_docs/text:
multimodal_test.pdf.metadata.json
</pre></div>
</div>
<p>You can view the full JSON extracts and the metadata definitions <a class="reference internal" href="#docs/content-metadata.md"><span class="xref myst">here</span></a>.</p>
</section>
<section id="we-also-provide-a-script-for-inspecting-extracted-images">
<h3>We also provide a script for inspecting <a class="reference internal" href="#src/util/image_viewer.py"><span class="xref myst">extracted images</span></a><a class="headerlink" href="#we-also-provide-a-script-for-inspecting-extracted-images" title="Link to this heading">¬∂</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>tkinter
python<span class="w"> </span>src/util/image_viewer.py<span class="w"> </span>--file_path<span class="w"> </span>./processed_docs/image/multimodal_test.pdf.metadata.json
</pre></div>
</div>
<blockquote>
<div><p>[!TIP]
Beyond inspecting the results, you can read them into things like <a class="reference internal" href="#examples/llama_index_multimodal_rag.ipynb"><span class="xref myst">llama-index</span></a> or <a class="reference internal" href="#examples/langchain_multimodal_rag.ipynb"><span class="xref myst">langchain</span></a> retrieval pipelines.</p>
<p>Please also checkout our <a class="reference external" href="https://build.nvidia.com/nvidia/multimodal-pdf-data-extraction-for-enterprise-rag">demo using a retrieval pipeline on build.nvidia.com</a> to query over document content pre-extracted w/ NVIDIA Ingest.</p>
</div></blockquote>
</section>
</section>
</section>
<section id="repo-structure">
<h1>Repo Structure<a class="headerlink" href="#repo-structure" title="Link to this heading">¬∂</a></h1>
<p>Beyond the relevant documentation, examples, and other links above, below is a description of contents in this repo‚Äôs folders:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#.github"><span class="xref myst">.github</span></a>: GitHub repo configuration files</p></li>
<li><p><a class="reference internal" href="#ci"><span class="xref myst">ci</span></a>: scripts used to build the nv-ingest container and other packages</p></li>
<li><p><a class="reference internal" href="#client"><span class="xref myst">client</span></a>: docs and source code for the nv-ingest-cli utility</p></li>
<li><p><a class="reference internal" href="#config"><span class="xref myst">config</span></a>: various yaml files defining configuration for OTEL, Prometheus</p></li>
<li><p><a class="reference internal" href="#data"><span class="xref myst">data</span></a>: Sample PDFs provided for testing convenience</p></li>
<li><p><a class="reference internal" href="#docker"><span class="xref myst">docker</span></a>: houses scripts used by the nv-ingest docker container</p></li>
<li><p><a class="reference internal" href="#docs"><span class="xref myst">docs</span></a>: Various READMEs describing deployment, metadata schemas, auth and telemetry setup</p></li>
<li><p><a class="reference internal" href="#examples"><span class="xref myst">examples</span></a>: Example notebooks, scripts, and longer form tutorial content</p></li>
<li><p><a class="reference internal" href="#helm"><span class="xref myst">helm</span></a>: Documentation for deploying nv-ingest to a Kubernetes cluster via Helm chart</p></li>
<li><p><a class="reference internal" href="#skaffold"><span class="xref myst">skaffold</span></a>: Skaffold configuration</p></li>
<li><p><a class="reference internal" href="#src"><span class="xref myst">src</span></a>: source code for the nv-ingest pipelines and service</p></li>
<li><p><a class="reference internal" href="#tests"><span class="xref myst">tests</span></a>: unit tests for nv-ingest</p></li>
</ol>
</section>
<section id="notices">
<h1>Notices<a class="headerlink" href="#notices" title="Link to this heading">¬∂</a></h1>
<section id="third-party-license-notice">
<h2>Third Party License Notice:<a class="headerlink" href="#third-party-license-notice" title="Link to this heading">¬∂</a></h2>
<p>If configured to do so, this project will download and install additional third-party open source software projects.
Review the license terms of these open source projects before use:</p>
<p>https://pypi.org/project/pdfservices-sdk/</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">INSTALL_ADOBE_SDK</span></code></strong>:</p>
<ul>
<li><p><strong>Description</strong>: If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the Adobe SDK will be installed in the container at launch time. This is
required if you want to use the Adobe extraction service for PDF decomposition. Please review the
<a class="reference external" href="https://github.com/adobe/pdfservices-python-sdk?tab=License-1-ov-file">license agreement</a> for the
pdfservices-sdk before enabling this option.</p></li>
</ul>
</li>
</ul>
</section>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Link to this heading">¬∂</a></h2>
<p>We require that all contributors ‚Äúsign-off‚Äù on their commits. This certifies that the contribution is your original
work, or you have rights to submit it under the same license, or a compatible license.</p>
<p>Any contribution which contains commits that are not Signed-Off will not be accepted.</p>
<p>To sign off on a commit you simply use the ‚Äìsignoff (or -s) option when committing your changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git commit -s -m &quot;Add cool feature.&quot;
</pre></div>
</div>
<p>This will append the following to your commit message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Signed</span><span class="o">-</span><span class="n">off</span><span class="o">-</span><span class="n">by</span><span class="p">:</span> <span class="n">Your</span> <span class="n">Name</span> <span class="o">&lt;</span><span class="n">your</span><span class="nd">@email</span><span class="o">.</span><span class="n">com</span><span class="o">&gt;</span>
</pre></div>
</div>
<section id="full-text-of-the-dco">
<h3>Full text of the DCO:<a class="headerlink" href="#full-text-of-the-dco" title="Link to this heading">¬∂</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">Developer</span> <span class="n">Certificate</span> <span class="n">of</span> <span class="n">Origin</span>
  <span class="n">Version</span> <span class="mf">1.1</span>

  <span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="mi">2004</span><span class="p">,</span> <span class="mi">2006</span> <span class="n">The</span> <span class="n">Linux</span> <span class="n">Foundation</span> <span class="ow">and</span> <span class="n">its</span> <span class="n">contributors</span><span class="o">.</span>
  <span class="mi">1</span> <span class="n">Letterman</span> <span class="n">Drive</span>
  <span class="n">Suite</span> <span class="n">D4700</span>
  <span class="n">San</span> <span class="n">Francisco</span><span class="p">,</span> <span class="n">CA</span><span class="p">,</span> <span class="mi">94129</span>

  <span class="n">Everyone</span> <span class="ow">is</span> <span class="n">permitted</span> <span class="n">to</span> <span class="n">copy</span> <span class="ow">and</span> <span class="n">distribute</span> <span class="n">verbatim</span> <span class="n">copies</span> <span class="n">of</span> <span class="n">this</span> <span class="n">license</span> <span class="n">document</span><span class="p">,</span> <span class="n">but</span> <span class="n">changing</span> <span class="n">it</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">allowed</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">Developer</span><span class="s1">&#39;s Certificate of Origin 1.1</span>

  <span class="n">By</span> <span class="n">making</span> <span class="n">a</span> <span class="n">contribution</span> <span class="n">to</span> <span class="n">this</span> <span class="n">project</span><span class="p">,</span> <span class="n">I</span> <span class="n">certify</span> <span class="n">that</span><span class="p">:</span>

  <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="n">The</span> <span class="n">contribution</span> <span class="n">was</span> <span class="n">created</span> <span class="ow">in</span> <span class="n">whole</span> <span class="ow">or</span> <span class="ow">in</span> <span class="n">part</span> <span class="n">by</span> <span class="n">me</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">have</span> <span class="n">the</span> <span class="n">right</span> <span class="n">to</span> <span class="n">submit</span> <span class="n">it</span> <span class="n">under</span> <span class="n">the</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span> <span class="n">indicated</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">file</span><span class="p">;</span> <span class="ow">or</span>

  <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="n">The</span> <span class="n">contribution</span> <span class="ow">is</span> <span class="n">based</span> <span class="n">upon</span> <span class="n">previous</span> <span class="n">work</span> <span class="n">that</span><span class="p">,</span> <span class="n">to</span> <span class="n">the</span> <span class="n">best</span> <span class="n">of</span> <span class="n">my</span> <span class="n">knowledge</span><span class="p">,</span> <span class="ow">is</span> <span class="n">covered</span> <span class="n">under</span> <span class="n">an</span> <span class="n">appropriate</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">have</span> <span class="n">the</span> <span class="n">right</span> <span class="n">under</span> <span class="n">that</span> <span class="n">license</span> <span class="n">to</span> <span class="n">submit</span> <span class="n">that</span> <span class="n">work</span> <span class="k">with</span> <span class="n">modifications</span><span class="p">,</span> <span class="n">whether</span> <span class="n">created</span> <span class="ow">in</span> <span class="n">whole</span> <span class="ow">or</span> <span class="ow">in</span> <span class="n">part</span> <span class="n">by</span> <span class="n">me</span><span class="p">,</span> <span class="n">under</span> <span class="n">the</span> <span class="n">same</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span> <span class="p">(</span><span class="n">unless</span> <span class="n">I</span> <span class="n">am</span> <span class="n">permitted</span> <span class="n">to</span> <span class="n">submit</span> <span class="n">under</span> <span class="n">a</span> <span class="n">different</span> <span class="n">license</span><span class="p">),</span> <span class="k">as</span> <span class="n">indicated</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">file</span><span class="p">;</span> <span class="ow">or</span>

  <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="n">The</span> <span class="n">contribution</span> <span class="n">was</span> <span class="n">provided</span> <span class="n">directly</span> <span class="n">to</span> <span class="n">me</span> <span class="n">by</span> <span class="n">some</span> <span class="n">other</span> <span class="n">person</span> <span class="n">who</span> <span class="n">certified</span> <span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">have</span> <span class="ow">not</span> <span class="n">modified</span> <span class="n">it</span><span class="o">.</span>

  <span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="n">I</span> <span class="n">understand</span> <span class="ow">and</span> <span class="n">agree</span> <span class="n">that</span> <span class="n">this</span> <span class="n">project</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">contribution</span> <span class="n">are</span> <span class="n">public</span> <span class="ow">and</span> <span class="n">that</span> <span class="n">a</span> <span class="n">record</span> <span class="n">of</span> <span class="n">the</span> <span class="n">contribution</span> <span class="p">(</span><span class="n">including</span> <span class="nb">all</span> <span class="n">personal</span> <span class="n">information</span> <span class="n">I</span> <span class="n">submit</span> <span class="k">with</span> <span class="n">it</span><span class="p">,</span> <span class="n">including</span> <span class="n">my</span> <span class="n">sign</span><span class="o">-</span><span class="n">off</span><span class="p">)</span> <span class="ow">is</span> <span class="n">maintained</span> <span class="n">indefinitely</span> <span class="ow">and</span> <span class="n">may</span> <span class="n">be</span> <span class="n">redistributed</span> <span class="n">consistent</span> <span class="k">with</span> <span class="n">this</span> <span class="n">project</span> <span class="ow">or</span> <span class="n">the</span> <span class="nb">open</span> <span class="n">source</span> <span class="n">license</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">involved</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">NV-Ingest</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Launch nv-ingest micro-service(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment-config.html"><strong>Environment Configuration Variables</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="content-metadata.html">Example text extracts for multimodal_test.pdf:</a></li>
<li class="toctree-l1"><a class="reference internal" href="ngc-api-key.html">Authenticating local Docker with NGC</a></li>
<li class="toctree-l1"><a class="reference internal" href="nv-ingest_cli.html">Example document submission to the nv-ingest-ms-runtime service</a></li>
<li class="toctree-l1"><a class="reference internal" href="nv-ingest_cli.html#command-line-dataset-creation-with-enumeration-and-sampling">Command line dataset creation with enumeration and sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="nv-ingest_cli.html#options">Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="nv-ingest_cli.html#command-line-interface-for-the-image-viewer-application-displays-paginated-images-from-a-json-file">Command line interface for the Image Viewer application, displays paginated images from a JSON file</a></li>
<li class="toctree-l1"><a class="reference internal" href="telemetry.html">Telemetry</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, NVIDIA.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/README.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>